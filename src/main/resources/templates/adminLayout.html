<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>[[${pageName}]]</title>
    <link rel="stylesheet" th:href="@{/css/adminLayout.css}"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

</head>
<body>

<div class='mainBox'>




    <div class="layout-nav">
        <logo class="logo"> HandyLink</logo>
        <div class="layout-profile">

            <div class="layout-profile-info">
                <div class="layout-profile-box">
                    <p th:text="${session.storeName}">상호명</p>
                </div>
                <div class="layout-profile-buttons">
                    <button type="button" class="layout-profile-button layout-mypage-button" onclick="location.href='./adminstoreinfo.admin'">마이 페이지</button>
                    <button type="button" class="layout-profile-button layout-logout-button" onclick="location.href='./adminlogin.login'">로그아웃</button>
                </div>
            </div>

        </div>
    </div>


    <div class="layout-container">
        <div class="sidebar">

            <!-- <div class="menu-btn"> <a href="./customer.do"> 메인  </a> </div> -->
            <div class="menu-btn dropdown-btn2">  <i class="bi bi-house-gear-fill"></i>  가게  <i class="bi3 bi-caret-down-fill"></i> <i class="bi4 bi-caret-left-fill"></i> </div>
            <div class="dropdown2">
                <a href="../mystore.admin"> <i class="bi bi-gear-fill"> </i> 가게관리 </a>
                <a href="../AdminStoreNotice.admin"> <i class="bi bi-check2-circle"> </i> 가게소식 </a>
                <a href="../storedayoff.admin"> <i class="bi bi-check2-circle"> </i> 휴무관리 </a>
            </div>
            <div class="menu-btn dropdown-btn">   <i class="bi bi-calendar-check"></i>  예약  <i class="bi bi-caret-down-fill"></i> <i class="bi2 bi-caret-left-fill"></i> </div>
<!--                <div class="menu-btn ">  <a href="../AdminReserveSetting.admin"> <i class="bi bi-calendar-check"></i>  예약  </a></div>-->

            <div class="dropdown">
                <a href="../AdminReserveSetting.admin"> <i class="bi bi-gear-fill"> </i> 예약설정</a>
                <a href="../AdminReserveManage.admin"> <i class="bi bi-check2-circle"> </i> 예약관리</a>
            </div>

            <div class="menu-btn"> <a href="./stat.do"> <i class="bi bi-bar-chart-line-fill"></i> 통계</a></div>
            <div class="menu-btn">  <a href="../AdminReviewList.admin"> <i class="bi bi-person-circle"></i> 리뷰 </a></div>
            <div class="menu-btn"><a href="./AdminChat.admin">  <i class="bi bi-chat-left-text-fill"></i> 채팅 </a></div>
        </div>

        <div class="layout-container-content">   [[${id}]]
            <div class="layout-content">
                <div id="root"></div>

            </div>
        </div>

    </div>




</div>

<script th:src="@{'/bundle/' + ${pageName} + '.bundle.js'}"></script>

<script>
    // // 드롭다운 버튼 클릭 시 드롭다운 토글
    // document.querySelector('.dropdown-btn').addEventListener('click', function() {
    //     const dropdown = document.querySelector('.dropdown');

    //     // 배경색 변경
    //     this.classList.toggle('active'); // active 클래스 토글
    // });

    const storeStatus = '[[${session.storeStatus}]]'; // 기본값 설정 (선택 사항)
    console.log(storeStatus); // storeStatus의 값을 콘솔에 출력

    function setupMenuButtons() {
        const menuButtons = document.querySelectorAll('.menu-btn, .dropdown-btn, .dropdown-btn2');

        // 모든 메뉴 버튼에 대해 클릭 이벤트 리스너를 한 번만 등록
        menuButtons.forEach(btn => {
            btn.addEventListener('click', (event) => {
                if (storeStatus === '대기') {
                    event.preventDefault(); // 기본 클릭 동작 방지
                    alert('현재 대기 중입니다. 메뉴를 사용할 수 없습니다.'); // 알림 메시지
                    return;
                }

                // 드롭다운 열기 및 닫기 로직
                if (btn.classList.contains('dropdown-btn')) {
                    const dropdown = document.querySelector('.dropdown');
                    const downIcon = document.querySelector('.bi-caret-down-fill');
                    const leftIcon = document.querySelector('.bi-caret-left-fill');
                    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';

                    // 드롭다운 상태에 따라 max-height 조정
                    if (dropdown.style.maxHeight) {
                        dropdown.style.maxHeight = null; // 숨김
                        downIcon.style.display = 'block'; // 아래 화살표 보이기
                        leftIcon.style.display = 'none'; // 왼쪽 화살표 숨기기
                    } else {
                        dropdown.style.maxHeight = dropdown.scrollHeight + "px"; // 펼침
                        downIcon.style.display = 'none'; // 아래 화살표 숨기기
                        leftIcon.style.display = 'block'; // 왼쪽 화살표 보이기
                    }

                    // 배경색 변경
                    btn.classList.toggle('active'); // active 클래스 토글
                }

                if (btn.classList.contains('dropdown-btn2')) {
                    const dropdown = document.querySelector('.dropdown2');
                    const downIcon = document.querySelector('.bi3');
                    const leftIcon = document.querySelector('.bi4');
                    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';

                    // 드롭다운 상태에 따라 max-height 조정
                    if (dropdown.style.maxHeight) {
                        dropdown.style.maxHeight = null; // 숨김
                        downIcon.style.display = 'block'; // 아래 화살표 보이기
                        leftIcon.style.display = 'none'; // 왼쪽 화살표 숨기기
                    } else {
                        dropdown.style.maxHeight = dropdown.scrollHeight + "px"; // 펼침
                        downIcon.style.display = 'none'; // 아래 화살표 숨기기
                        leftIcon.style.display = 'block'; // 왼쪽 화살표 보이기
                    }

                    // 배경색 변경
                    btn.classList.toggle('active'); // active 클래스 토글
                }
            });
        });
    }

    window.onload = function() {
        setupMenuButtons();
    };




</script>


</div>
</body>
</html>